#-*- conding:UTF-8 -*-import sysimport socketimport datetimeDEFAULT_PORT = 8002def timeServer(port):    print 'reveive port : %d'%(port)    host = ''    m_socket = None    addrinfo = socket.getaddrinfo(host, port, socket.AF_UNSPEC, socket.SOCK_STREAM, 0, socket.AI_PASSIVE)    for res in addrinfo:        af, socktype, proto, canonname, sa = res        try:            m_socket = socket.socket(af ,socktype ,proto)        except socket.error, msg:            m_socket = None            continue                try:            m_socket.bind(sa)            m_socket.listen(10)        except socket.error, msg:            m_socket.close()            m_socket = None            continue        break;        if m_socket is None:        print 'create server socket meet error.'        return 1        print res    while True:        client ,addr = m_socket.accept()        print 'get connect from ',addr                 client.send(str(datetime.datetime.now()))        client.close;    if __name__ == '__main__':    port = DEFAULT_PORT    if len(sys.argv) > 1:        try:            port = int(sys.argv[1])            if (port < 0 or port >= 65535):                port = DEFAULT_PORT        except Exception, e:            port = DEFAULT_PORT    timeServer(port)